model Room {
  id      Int      @id @default(autoincrement())
  name    String   @unique
  members Member[]
  bills   Bill[]
}

model Member {
  id      Int     @id @default(autoincrement())
  name    String
  roomId  Int
  room    Room    @relation(fields: [roomId], references: [id], onDelete: Cascade)
  shares  Share[]
}

model Bill {
  id           Int      @id @default(autoincrement())
  title        String
  amountCents  Int
  period       String   // "YYYY-MM"
  roomId       Int
  room         Room     @relation(fields: [roomId], references: [id], onDelete: Cascade)
  shares       Share[]
  createdAt    DateTime @default(now())
}

model Share {
  id          Int     @id @default(autoincrement())
  billId      Int
  bill        Bill    @relation(fields: [billId], references: [id], onDelete: Cascade)
  memberId    Int
  member      Member  @relation(fields: [memberId], references: [id], onDelete: Cascade)
  amountCents Int
  paid        Boolean @default(false)

  @@unique([billId, memberId])
}
